<section class="container-xxl mb-5">
  <h2>ユーザーの口コミ</h2>
  <% @comments.each do |comment| %>
    <div class="comment">
      <p class="comment-time"><%= comment.created_at.strftime('%Y-%m-%d %H:%M') %></p>
      <p class="comment-text"><%= comment.comment %></p>
      <p class="comment-author">- <%= comment.user.name %></p>
      <% if comment.user == current_user %>
        <p><%= link_to "削除する", user_comment_path(comment), data: {turbo_method: :delete, turbo_confirm: "本当に口コミを削除しますか？"} %></p>
      <% end %>
    </div>
  <% end %>
<style>
.comment {
  border: 1px solid #ddd;
  border-radius: 4px;
  padding: 10px;
  margin-bottom: 10px;
  background-color: #f9f9f9;
}

.comment-time {
  font-size: 0.85em;
  color: #666;
  margin-bottom: 5px;
}

.comment-text {
  font-size: 1em;
  color: #333;
}

.comment-author {
  font-size: 0.9em;
  color: #007bff;
  text-align: right;
  margin-top: 10px;
}
</style>


  <% if user_signed_in? %>
    <%= form_with model: @comment, url:user_comments_path do | f| %>
      <%= render "layouts/error", model: @comment %>

      <div class="row mb-3">
        <div class="mb-3">
          <%= f.label :comment, "口コミ" %>を登録
          <%= f.text_area :comment, class: "form-control", rows: 5 %>
        </div>
      </div>
      <%= f.hidden_field :shop_id, value: @shop.id %>
      <%= f.submit class: "btn btn-user w-100" %>
    <% end %>
  <% else %>
    <%= link_to "ログイン", login_path %>して口コミを投稿しましょう！
  <% end %>
</section>
